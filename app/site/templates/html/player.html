
<html>
	<head>
		<title>{{player_name}} | El Aggregator</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="{{ url_for('static', filename='assets/css/main.css') }}" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
	</head>
	<body>

<!-- Page Wrapper -->
  <div id="page-wrapper">

    <!-- Header -->
      <header id="header">
		<h1><a href="{{url_for('home')}}">El Aggregator</a></h1>
      </header>

<!-- Main -->
  <article id="main">
    <section class="wrapper style5">
      <div class="inner">
        <section>
		 <header> 
			<h2>{{player_name}}</h2>
		  <p>({{report['short_name']}})</p>
		</header>
          <hr />
					
					<div align="center">
						<img class="initial loaded" src="https://cdn.sofifa.org/players/10/20/{{report['sofifa_id']}}.png"  width="128" height="128" align="center">
						<br/><br/>
						<p>Age: {{report['age']}} | Nation: {{report['nationality']}} | Position: {{report['player_positions']}}</p>
						<ul class="actions">
							<li><h3>Overall</h3><a class="button">{{report['overall']}}</a></li>
							<li></li>
							<li></li>
							<li><h3>Potential</h3><a class="button">{{report['potential']}}</a></li>
						</ul>
						<canvas id="ratingsChart"></canvas>
						<script>
							var ctx = document.getElementById("ratingsChart")
							var chart = new Chart(ctx, {
							// The type of chart we want to create
							type: 'radar',

							// The data for our dataset
							data: {
								labels: ['Pace', 'Shooting', 'Passing', 'Dribbling', 'Defending', 'Physical'],
								datasets: [{
									label: "{{ report['short_name']}}",
									backgroundColor: 'rgb(255, 99, 132,0.1)',
									borderColor: 'rgb(255, 99, 132)',
									data: {{ [report['pace'], report['shooting'], report['passing'], report['dribbling'], report['defending'], report['physic']] }}
								},
								{
									label: "Average Pro Player",
									backgroundColor: 'rgb(99, 132, 255, 0.1)',
									borderColor: 'rgb(99, 132, 255)',
									data: [67.7, 52.3, 57.2, 62.5, 51.6, 64.9]
								}
								]
							},

							// Configuration options go here
							options: {
								scale: {
									angleLines: {
										display: false
									},
									ticks: {
										suggestedMin: 35,
										suggestedMax: 100
									}
								}
							}
						});
						</script>
					</div>
					<hr/>
					<h2> Wikipedia Bio </h2>
					<p>{{report['bio']}}</p>
					<hr/>
					<div align="center">
						<ul class="actions">
							<li><a href="https://www.transfermarkt.com/schnellsuche/ergebnis/schnellsuche?query={{('+').join(player_name.lower().split(' '))}}&x=0&y=0" class="button special icon fa-link" target="_blank">TransferMarkt</a></li>
							<li><a href="https://sofifa.com/player/{{report['sofifa_id']}}" class="button special icon fa-link" target="_blank">SoFifa</a></li>
							<li><a href="#" class="button special icon fa-link">Wikipedia</a></li>
						</ul>
					</div>
        </section>

      </div>

			<br/>
			<hr/>
			<h2 align="center">YouTube Highlights</h2>
	  			<div align="center">
			<!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
					<div id="player" ></div>

					<script>
					  // 2. This code loads the IFrame Player API code asynchronously.
					  var tag = document.createElement('script');
				
					  tag.src = "https://www.youtube.com/iframe_api";
					  tag.align = "center"
					  var firstScriptTag = document.getElementsByTagName('script')[0];
					  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
				
					  // 3. This function creates an <iframe> (and YouTube player)
					  //    after the API code downloads.
					  var player;
					  function onYouTubeIframeAPIReady() {
						player = new YT.Player('player', {
						  height: '390',
						  width: '640',
						  videoId: '{{ yt_results[0].video_id }}',
						  events: {
							'onReady': onPlayerReady,
							'onStateChange': onPlayerStateChange
						  }
						});
					  }
				
					  // 4. The API will call this function when the video player is ready.
					  function onPlayerReady(event) {
						event.target.playVideo();
					  }
				
					  // 5. The API calls this function when the player's state changes.
					  //    The function indicates that when playing a video (state=1),
					  //    the player should play for six seconds and then stop.
					  var done = false;
					  function onPlayerStateChange(event) {
						
					  }
					  function stopVideo() {
						player.stopVideo();
					  }
					</script>
					
					<br/><br/>
				</div>
			<hr/>
			<h2 align="center">/r/soccer highlights</h2>
			
		        {% for highlight in highlights%}
			    <div style="margin:auto" class="card">
					<div class="container">
						<a href="{{highlight.link}}" target='_blank'><p>{{highlight.title}}</p></a>
					</div>
			    </div>			
				{%endfor%}
			</div>
			<br/>

    </section>
  </article>

<!-- Scripts -->
  <script src="{{ url_for('static', filename='assets/js/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/js/jquery.scrollex.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/js/jquery.scrolly.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/js/skel.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/js/util.js') }}"></script>
  <!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
  <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>

  </body>
</html>
